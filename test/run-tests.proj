<Project>
  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), Directory.Build.props))\Directory.Build.props" />

  <ItemGroup>
    <Project Include="$(MSBuildThisFileDirectory)**\*.csproj" />
    <Project Include="$(MSBuildThisFileDirectory)**\*.fsproj" />
  </ItemGroup>

  <Target Name="RunTests">
    <Message Importance="High" Text="Running tests ..." />
    <MSBuild Targets="VSTest"
             Projects="@(Project)"
             Properties="VSTestNoBuild=true;CollectCoverage=true;CopyLocalLockFileAssemblies=true;CoverletOutputFormat=opencover;CoverletOutput=$(MSBuildThisFileDirectory)..\bin\coverage\$(AssemblyName).xml;Include=[Microsoft.ML.*]*" />
  </Target>

  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), Directory.Build.targets))\Directory.Build.targets" />

  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), dir.traversal.targets))\dir.traversal.targets" />

</Project>